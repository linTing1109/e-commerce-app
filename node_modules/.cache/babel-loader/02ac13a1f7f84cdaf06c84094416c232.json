{"ast":null,"code":"var _jsxFileName = \"C:\\\\JavaPCSchool3\\\\e-commerce-app\\\\src\\\\Homework\\\\MemberLogic.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\n// import { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Modal from 'react-modal'; //有多import才可以使用\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst apiUrl = 'http://localhost:8090/training/ecommerce/MemberController/login';\n\n// 功能:會員登入頁面\nconst MemberLogic = () => {\n  _s();\n  // super(props);\n  // const [onLogin]=props;\n  // const navigate = useNavigate();\n  const inputPdRef = useRef();\n  const [showModal, setShowModal] = useState(false);\n  const [data, setData] = useState({\n    // 後端api傳入使用:memberInfoVo傳api 把identificationNo&cusPassword包進去\n    memberInfoVo: {\n      identificationNo: '',\n      cusPassword: ''\n    },\n    //回傳所需的資料 密碼不會秀出來 所以這邊不會有密碼\n    // idNo: props.idNo,\n    cusName: '',\n    isLogin: false,\n    loginMessage: ''\n  });\n\n  // 解構 \n  const {\n    memberInfoVo,\n    idNo,\n    cusName,\n    isLogin,\n    loginMessage\n  } = data;\n  const {\n    identificationNo,\n    cusPassword\n  } = memberInfoVo;\n  const changeMemberID = event => {\n    setData(prevState => ({\n      ...prevState,\n      memberInfoVo: {\n        //兩層式的寫法\n        ...prevState.memberInfoVo,\n        identificationNo: event.target.value\n        // loginMessage:''\n      }\n    }));\n\n    inputPdRef.current.focus(); //當滑鼠點擊其他地方時 游標跳到password那邊\n  };\n\n  const changePassword = event => {\n    setData(prevState => ({\n      ...prevState,\n      memberInfoVo: {\n        ...prevState.memberInfoVo,\n        cusPassword: event.target.value\n        // loginMessage:'',\n      }\n    }));\n  };\n\n  // 點擊登入按鈕  \n  const clickMemberLogic = () => {\n    //代表已經登入 導入商品頁\n    if (cusName != null) {\n      window.location = \"/SearchGoods\"; //為了上半部重新刷新 所以故意使用這個\n      // navigator(\"/SearchGoods\",{state:data});\n    }\n    // 尚未登入 秀出彈跳畫面視窗(錯誤結果)\n    if (cusName == null) {\n      setShowModal(true);\n    }\n  };\n\n  // 後端api\n  const fetchList = async () => {\n    const memberData = await axios.post(apiUrl, memberInfoVo, {\n      withCredentials: true\n    }).then(rs => rs.data).catch(error => {\n      console.log(error);\n    });\n    setData(e => ({\n      ...e,\n      //hooks無法部分更新,加...e為保持原先欄位\n      idNo: memberData.identificationNo,\n      //這邊不會有密碼出現\n      cusName: memberData.cusName,\n      loginMessage: memberData.loginMessage,\n      isLogin: memberData.isLogin\n      // props.idNo:memberData.identificationNo,\n    }));\n\n    onLogin(memberData.identificationNo);\n  };\n  useEffect(() => {\n    fetchList();\n  }, [identificationNo, cusPassword]); //當輸入帳號密碼更新 \n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"\\u6703\\u54E1\\u767B\\u5165\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), \"\\u6703\\u54E1\\u5E33\\u865F ID\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"id\",\n      placeholder: \"Enter ID\",\n      required: true,\n      onBlur: changeMemberID\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 103\n    }, this), \"\\u6703\\u54E1\\u5BC6\\u78BC Password\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      name: \"pwd\",\n      placeholder: \"Enter Password\",\n      required: true,\n      onBlur: changePassword,\n      ref: inputPdRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 129\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      onClick: clickMemberLogic,\n      children: \"\\u767B\\u5165\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: showModal,\n      onRequestClose: () => setShowModal(false),\n      style: {\n        content: {\n          width: '400px',\n          // 設定寬度\n          height: '300px' // 設定高度\n        }\n      },\n      children: [loginMessage, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowModal(false),\n        children: \"\\u95DC\\u9589\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n};\n_s(MemberLogic, \"4v0RjGXPdGHjgTLoD54JFYptnvc=\");\n_c = MemberLogic;\nexport default MemberLogic;\nvar _c;\n$RefreshReg$(_c, \"MemberLogic\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","Modal","apiUrl","MemberLogic","inputPdRef","showModal","setShowModal","data","setData","memberInfoVo","identificationNo","cusPassword","cusName","isLogin","loginMessage","idNo","changeMemberID","event","prevState","target","value","current","focus","changePassword","clickMemberLogic","window","location","fetchList","memberData","post","withCredentials","then","rs","catch","error","console","log","e","onLogin","content","width","height"],"sources":["C:/JavaPCSchool3/e-commerce-app/src/Homework/MemberLogic.js"],"sourcesContent":["import React, { useState,useRef ,useEffect} from 'react';\r\n// import { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Modal from 'react-modal';//有多import才可以使用\r\n\r\nconst apiUrl = 'http://localhost:8090/training/ecommerce/MemberController/login';\r\n\r\n// 功能:會員登入頁面\r\nconst MemberLogic = () => {\r\n  // super(props);\r\n  // const [onLogin]=props;\r\n  // const navigate = useNavigate();\r\n  const inputPdRef = useRef();\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n    const [data, setData] = useState({\r\n\r\n        // 後端api傳入使用:memberInfoVo傳api 把identificationNo&cusPassword包進去\r\n        memberInfoVo:{ \r\n            identificationNo: '',\r\n            cusPassword: '',\r\n        },\r\n\r\n        //回傳所需的資料 密碼不會秀出來 所以這邊不會有密碼\r\n        // idNo: props.idNo,\r\n        cusName: '',\r\n        isLogin:false,\r\n        loginMessage:'',\r\n    });\r\n\r\n    // 解構 \r\n    const {memberInfoVo,idNo,cusName,isLogin,loginMessage} =data ;\r\n    const {identificationNo,cusPassword}=memberInfoVo;\r\n    \r\n\r\n    const changeMemberID = (event) => {\r\n        setData((prevState) => ({\r\n          ...prevState,\r\n          memberInfoVo: { //兩層式的寫法\r\n            ...prevState.memberInfoVo,\r\n            identificationNo: event.target.value,\r\n            // loginMessage:''\r\n          },\r\n        }));\r\n        inputPdRef.current.focus(); //當滑鼠點擊其他地方時 游標跳到password那邊\r\n      };  \r\n      \r\n      const changePassword = (event) => {\r\n        setData((prevState) => ({\r\n          ...prevState,\r\n          memberInfoVo: {\r\n            ...prevState.memberInfoVo,\r\n            cusPassword: event.target.value,\r\n            // loginMessage:'',\r\n          },\r\n        }));\r\n      };  \r\n    \r\n    // 點擊登入按鈕  \r\n    const clickMemberLogic = ()  => {\r\n        //代表已經登入 導入商品頁\r\n        if(cusName != null){ \r\n          window.location = \"/SearchGoods\";//為了上半部重新刷新 所以故意使用這個\r\n          // navigator(\"/SearchGoods\",{state:data});\r\n        }\r\n        // 尚未登入 秀出彈跳畫面視窗(錯誤結果)\r\n        if (cusName == null ) {\r\n          setShowModal(true);\r\n        }\r\n       \r\n    }\r\n\r\n    // 後端api\r\n    const fetchList = async() => {\r\n        const memberData = await axios.post(apiUrl, memberInfoVo,{ withCredentials: true })\r\n            .then(rs => rs.data)\r\n            .catch(error => { console.log(error); });\r\n            setData( e => ({\r\n                    ...e,//hooks無法部分更新,加...e為保持原先欄位\r\n                    idNo: memberData.identificationNo,  //這邊不會有密碼出現\r\n                    cusName: memberData.cusName,\r\n                    loginMessage: memberData.loginMessage,\r\n                    isLogin: memberData.isLogin,\r\n                    // props.idNo:memberData.identificationNo,\r\n                }));\r\n                \r\n            onLogin(memberData.identificationNo);    \r\n    };\r\n\r\n    useEffect(() => {\r\n      fetchList();\r\n    },[identificationNo,cusPassword]);//當輸入帳號密碼更新 \r\n\r\n    return (\r\n        <div>\r\n            會員登入<br />\r\n            <br />\r\n              會員帳號 ID<br /> \r\n              {/* 使用 onBlur 避免頻繁被觸發 */}\r\n              <input type=\"text\" name=\"id\" placeholder=\"Enter ID\" required  onBlur={changeMemberID} /><br />\r\n              會員密碼 Password<br />\r\n              <input type=\"password\" name=\"pwd\" placeholder=\"Enter Password\" required onBlur={changePassword} ref={inputPdRef}/><br />\r\n              \r\n              <button type=\"submit\" onClick={clickMemberLogic}>登入</button>\r\n            \r\n            {/* {!isLogin && <div>{loginMessage}</div>} */}\r\n\r\n            <Modal\r\n              isOpen={showModal}\r\n              onRequestClose={() => setShowModal(false)}\r\n              style={{\r\n                content: {\r\n                  width: '400px',  // 設定寬度\r\n                  height: '300px', // 設定高度\r\n                },\r\n              }}\r\n            >\r\n              {loginMessage}\r\n              <button onClick={() => setShowModal(false)}>關閉</button>\r\n            </Modal>\r\n            {/* <Modal\r\n                isOpen={showModal}\r\n                onRequestClose={handleCloseModal}\r\n                overlayClassName=\"modal-overlay\"\r\n                className=\"modal-content\"\r\n              >\r\n                <h2>彈跳視窗</h2>\r\n                <p>點擊任意地方以關閉視窗</p>\r\n            </Modal> */}\r\n            <hr/>\r\n            \r\n            {/* 測試用:<br/>\r\n            idNo:{idNo}<br/>\r\n            cusName:{cusName}<br/> */}\r\n            {/* JSX 不能直接顯示布林值 要先轉換成String才可以直接秀出來 */}\r\n            {/* isLogin: {String(isLogin)}<br/> \r\n            loginMessage:{loginMessage}<br/> */}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MemberLogic\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}